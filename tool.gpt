Name: Get GitHub Action Job Logs
Description: Gets the logs of a GH Actions job.
Param: owner: the owner of the GitHub repo
Param: repo: the name of the GitHub repo
Param: job_id: the ID of the job to get the logs for
Credential: credential as gh-actions-cred

#!python3

import urllib.request
import os

owner = os.getenv("OWNER")
repo = os.getenv("REPO")
job_id = os.getenv("JOB_ID")
url = f"https://api.github.com/repos/{owner}/{repo}/actions/jobs/{job_id}/logs"
token = os.getenv("TOKEN")
headers = {
    "Authorization": f"token {token}",
    "Accept": "application/vnd.github.v3+json"
}

request = urllib.request.Request(url, headers=headers)
with urllib.request.urlopen(request) as response:
    print(response.read().decode("utf-8"))

---
Type: credential
Name: credential
Tools: github.com/obot-platform/tools/generic-credential

#!sys.call github.com/obot-platform/tools/generic-credential

{
    "promptInfo": {
        "fields": [
            {
                "name": "GitHub PAT",
                "description": "Your GitHub personal access token",
                "env": "TOKEN"
            }
        ],
        "message": "Enter your GitHub personal access token."
    }
}
